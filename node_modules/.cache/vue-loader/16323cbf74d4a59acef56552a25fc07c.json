{"remainingRequest":"D:\\Code Files\\VueFile\\阶段工作\\交通事故数据可视化系统\\webgis-mobil1.2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code Files\\VueFile\\阶段工作\\交通事故数据可视化系统\\webgis-mobil1.2\\src\\views\\DataManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Code Files\\VueFile\\阶段工作\\交通事故数据可视化系统\\webgis-mobil1.2\\src\\views\\DataManage.vue","mtime":1712568775292},{"path":"D:\\Code Files\\VueFile\\阶段工作\\交通事故数据可视化系统\\webgis-mobil1.2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Code Files\\VueFile\\阶段工作\\交通事故数据可视化系统\\webgis-mobil1.2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code Files\\VueFile\\阶段工作\\交通事故数据可视化系统\\webgis-mobil1.2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czoge30sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYWN0aXZlTmFtZTogImZpcnN0IiwNCg0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIG1haW5EYXRhOiBbXSwNCiAgICAgIHNlYXJjaFN0cjogIiIsDQoNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgZGlhbG9nRGF0YTogew0KICAgICAgICBuYW1lOiAiIiwNCiAgICAgICAgYnJpZWY6ICIiLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KDQogIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgiL0pUU0dNYXJrRGF0YUdldC9KVFNHTWFya0RhdGFHZXQiKTsNCiAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgdGhpcy5tYWluRGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgdGhpcy5jaGFuZ2VpbnN0cnlUeXBlKCJvbmUiKTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKFsiaW5zdHJ5VHlwZSIsICJhbGxHb25nSmlhbyJdKSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwTXV0YXRpb25zKFsiY2hhbmdlaW5zdHJ5VHlwZSIsICJnZXRDb29yZGluYXRlIl0pLA0KICAgIGFkZFRGKCkgew0KICAgICAgdGhpcy5nZXRDb29yZGluYXRlKFtdKTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvSGVyaXRhZ2VQcm9QdXNoL2FkZCIpOw0KICAgIH0sDQoNCiAgICBoYW5kbGVDbG9zZShkb25lKSB7DQogICAgICB0aGlzLiRjb25maXJtKCLnoa7orqTlhbPpl63vvJ8iKQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgZG9uZSgpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4ge30pOw0KICAgIH0sDQoNCiAgICBhc3luYyBjaGFuZ2VEYXRhVHlwZSgpIHsNCiAgICAgIGlmICh0aGlzLmFjdGl2ZU5hbWUgPT09ICJmaXJzdCIpIHsNCiAgICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgiL0pUU0dNYXJrRGF0YUdldC9KVFNHTWFya0RhdGFHZXQiKTsNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICB0aGlzLmNoYW5nZWluc3RyeVR5cGUoIm9uZSIpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDnvJbovpHmjInpkq4NCiAgICBlZGl0TWFpbihyb3cpIHsNCiAgICAgIGNvbnNvbGUubG9nKHJvdyk7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2hlcml0YWdlL2FkZC8iICsgcm93Ll9pZCk7DQogICAgfSwNCg0KICAgIC8vIOaooeeziuafpeivouaMiemSrg0KICAgIGFzeW5jIHNlYXJjaENsaWNrKCkgew0KICAgICAgaWYgKHRoaXMuc2VhcmNoU3RyKSB7DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gdGhpcy5tYWluRGF0YTsNCg0KICAgICAgICB2YXIgbmV3dGFibGVEYXRhID0gdGhpcy50YWJsZURhdGEuZmlsdGVyKChlbGUpID0+DQogICAgICAgICAgZWxlLmFkZHJlc3MuaW5jbHVkZXModGhpcy5zZWFyY2hTdHIpDQogICAgICAgICk7DQoNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSBuZXd0YWJsZURhdGE7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMubWFpbkRhdGE7DQogICAgICB9DQogICAgfSwNCg0KICAgIGFzeW5jIGRlbE1haW4ocm93KSB7DQogICAgICB2YXIgcmVzID0gIiI7DQogICAgICByZXMgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KA0KICAgICAgICAiL0pUU0dNYXJrRGF0YVJlbW92ZS9KVFNHTWFya0RhdGFSZW1vdmUiLA0KICAgICAgICByb3cNCiAgICAgICk7DQoNCiAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogIuS/oeaBr+WIoOmZpOaIkOWKnyIsDQogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIC8vIOmHjeaWsOiOt+WPluaVsOaNrg0KICAgICAgdmFyIHJlczEgPSAiIjsNCiAgICAgIHJlczEgPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoIi9KVFNHTWFya0RhdGFHZXQvSlRTR01hcmtEYXRhR2V0Iik7DQogICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlczEuZGF0YS5kYXRhOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["DataManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataManage.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <!-- 数据管理 -->\r\n  <div class=\"data-manage\">\r\n    <div class=\"data-manage-bottom padding15\">\r\n      <div class=\"data-manage-buttons\">\r\n        <div style=\"display: flex; align-items: center\">\r\n          <span style=\"margin-right: 15px\">\r\n            系统交通事故数据总数:{{ tableData.length }}\r\n          </span>\r\n          <el-input\r\n            style=\"width: 300px; margin-left: 15px\"\r\n            placeholder=\"请输入事发地关键词以进行筛选\"\r\n            v-model=\"searchStr\"\r\n            size=\"small\"\r\n            class=\"input-with-select\"\r\n          >\r\n            <el-button\r\n              slot=\"append\"\r\n              icon=\"el-icon-search\"\r\n              @click=\"searchClick\"\r\n            ></el-button>\r\n          </el-input>\r\n\r\n          <el-button\r\n            slot=\"append\"\r\n            @click=\"addTF\"\r\n            style=\"margin-left: 15px\"\r\n            size=\"small\"\r\n            >录入新交通事故</el-button\r\n          >\r\n        </div>\r\n        <br />\r\n        <!-- 详情及表格 -->\r\n        <el-tabs\r\n          v-model=\"activeName\"\r\n          type=\"border-card\"\r\n          @tab-click=\"changeDataType\"\r\n        >\r\n          <el-tab-pane label=\"交通事故数据表\" name=\"first\">\r\n            <el-table\r\n              border\r\n              stripe\r\n              :data=\"tableData\"\r\n              style=\"width: 100%\"\r\n              height=\"480\"\r\n            >\r\n              <el-table-column\r\n                type=\"index\"\r\n                label=\"序号\"\r\n                width=\"60\"\r\n                align=\"center\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column prop=\"id\" label=\"登记编号\" width=\"180\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"date\" label=\"事故发生时间\" width=\"180\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"address\" label=\"事故地点\" width=\"180\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"coon\" label=\"经纬度坐标\" width=\"180\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"company\" label=\"办案单位\" width=\"180\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"admin\" label=\"接案人\" width=\"100\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"num\" label=\"受伤人员\" width=\"80\">\r\n              </el-table-column>\r\n\r\n              <el-table-column label=\"操作\" align=\"center\" width=\"150\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    type=\"text\"\r\n                    size=\"small\"\r\n                    @click=\"delMain(scope.row)\"\r\n                    >删除</el-button\r\n                  >\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n\r\n        <el-dialog\r\n          :title=\"dialogData.name\"\r\n          :visible.sync=\"dialogVisible\"\r\n          width=\"30%\"\r\n          :before-close=\"handleClose\"\r\n        >\r\n          <span>简介：</span>\r\n          <span>{{ dialogData.brief }}</span>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"dialogVisible = false\"\r\n              >确 定</el-button\r\n            >\r\n          </span>\r\n        </el-dialog>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from \"vuex\";\r\n\r\nexport default {\r\n  components: {},\r\n\r\n  data() {\r\n    return {\r\n      activeName: \"first\",\r\n\r\n      tableData: [],\r\n      mainData: [],\r\n      searchStr: \"\",\r\n\r\n      dialogVisible: false,\r\n      dialogData: {\r\n        name: \"\",\r\n        brief: \"\",\r\n      },\r\n    };\r\n  },\r\n\r\n  async created() {\r\n    var res = await this.$axios.get(\"/JTSGMarkDataGet/JTSGMarkDataGet\");\r\n    this.tableData = res.data.data;\r\n    this.mainData = res.data.data;\r\n    this.changeinstryType(\"one\");\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\"instryType\", \"allGongJiao\"]),\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"changeinstryType\", \"getCoordinate\"]),\r\n    addTF() {\r\n      this.getCoordinate([]);\r\n      this.$router.push(\"/HeritageProPush/add\");\r\n    },\r\n\r\n    handleClose(done) {\r\n      this.$confirm(\"确认关闭？\")\r\n        .then(() => {\r\n          done();\r\n        })\r\n        .catch(() => {});\r\n    },\r\n\r\n    async changeDataType() {\r\n      if (this.activeName === \"first\") {\r\n        var res = await this.$axios.get(\"/JTSGMarkDataGet/JTSGMarkDataGet\");\r\n        this.tableData = res.data.data;\r\n        this.changeinstryType(\"one\");\r\n      }\r\n    },\r\n\r\n    // 编辑按钮\r\n    editMain(row) {\r\n      console.log(row);\r\n      this.$router.push(\"/heritage/add/\" + row._id);\r\n    },\r\n\r\n    // 模糊查询按钮\r\n    async searchClick() {\r\n      if (this.searchStr) {\r\n        this.tableData = this.mainData;\r\n\r\n        var newtableData = this.tableData.filter((ele) =>\r\n          ele.address.includes(this.searchStr)\r\n        );\r\n\r\n        this.tableData = newtableData;\r\n      } else {\r\n        this.tableData = this.mainData;\r\n      }\r\n    },\r\n\r\n    async delMain(row) {\r\n      var res = \"\";\r\n      res = await this.$axios.post(\r\n        \"/JTSGMarkDataRemove/JTSGMarkDataRemove\",\r\n        row\r\n      );\r\n\r\n      if (res.status === 200) {\r\n        this.$message({\r\n          message: \"信息删除成功\",\r\n          type: \"success\",\r\n        });\r\n      }\r\n      // 重新获取数据\r\n      var res1 = \"\";\r\n      res1 = await this.$axios.get(\"/JTSGMarkDataGet/JTSGMarkDataGet\");\r\n      this.tableData = res1.data.data;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]}]}