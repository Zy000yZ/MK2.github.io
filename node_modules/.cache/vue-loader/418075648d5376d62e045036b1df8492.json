{"remainingRequest":"D:\\Code Files\\VueFile\\阶段工作\\光缆资源平面展示系统（临时）\\webgis-gx1.0\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code Files\\VueFile\\阶段工作\\光缆资源平面展示系统（临时）\\webgis-gx1.0\\src\\views\\ImgSmall.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Code Files\\VueFile\\阶段工作\\光缆资源平面展示系统（临时）\\webgis-gx1.0\\src\\views\\ImgSmall.vue","mtime":1722591383425},{"path":"D:\\Code Files\\VueFile\\阶段工作\\光缆资源平面展示系统（临时）\\webgis-gx1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code Files\\VueFile\\阶段工作\\光缆资源平面展示系统（临时）\\webgis-gx1.0\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Code Files\\VueFile\\阶段工作\\光缆资源平面展示系统（临时）\\webgis-gx1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Code Files\\VueFile\\阶段工作\\光缆资源平面展示系统（临时）\\webgis-gx1.0\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8v5Y6L57yp6LSo6YePDQogICAgICBpbWdRdWFsaXR5OiAwLjUsDQogICAgICBpbWFnZVVybDogIiIsDQogICAgfTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLy8g5LiK5Lyg5oiQ5YqfDQogICAgaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMsIGZpbGUpIHsNCiAgICAgIC8vIOacjeWKoeWZqOi/lOWbnue7k+aenOWkhOeQhg0KICAgICAgY29uc29sZS5sb2cocmVzLGZpbGUpDQogICAgfSwNCiAgICBkYXRhVVJJdG9CbG9iKGRhdGFVUkksIHR5cGUpIHsNCiAgICAgIHZhciBiaW5hcnkgPSBhdG9iKGRhdGFVUkkuc3BsaXQoIiwiKVsxXSk7DQogICAgICB2YXIgYXJyYXkgPSBbXTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmluYXJ5Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGFycmF5LnB1c2goYmluYXJ5LmNoYXJDb2RlQXQoaSkpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIG5ldyBCbG9iKFtuZXcgVWludDhBcnJheShhcnJheSldLCB7IHR5cGU6IHR5cGUgfSk7DQogICAgfSwNCg0KICAgIC8vIOS4iuS8oOWJjQ0KICAgIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlKSB7DQogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7DQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsNCiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsNCiAgICAgICAgaW1hZ2Uub25sb2FkID0gKGltYWdlRXZlbnQpID0+IHsNCiAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsNCiAgICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7DQogICAgICAgICAgY29uc3Qgd2lkdGggPSBpbWFnZS53aWR0aCAqIF90aGlzLmltZ1F1YWxpdHk7DQogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0ICogX3RoaXMuaW1nUXVhbGl0eTsNCiAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDsNCiAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0Ow0KICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICBjb25zdCBkYXRhVXJsID0gY2FudmFzLnRvRGF0YVVSTChmaWxlLnR5cGUpOw0KICAgICAgICAgIGNvbnN0IGJsb2JEYXRhID0gX3RoaXMuZGF0YVVSSXRvQmxvYihkYXRhVXJsLCBmaWxlLnR5cGUpOw0KICAgICAgICAgIHJlc29sdmUoYmxvYkRhdGEpOw0KICAgICAgICAgIGNvbnNvbGUubG9nKGltYWdlRXZlbnQpDQogICAgICAgIH07DQogICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gew0KICAgICAgICAgIGltYWdlLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsNCiAgICAgICAgfTsNCiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7DQogICAgICB9KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["ImgSmall.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImgSmall.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"BecauseMain padding15\" style=\"height: calc(100vh - 20vh)\">\r\n    <br />\r\n    <br />\r\n\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <h3>图片大小处理</h3>\r\n      </div>\r\n      <p>光缆资源平面展示系统图片大小处理：测试页</p>\r\n    </el-card>\r\n\r\n    <el-divider></el-divider>\r\n    <!-- <el-form-item label=\"照片\">\r\n      <el-upload\r\n        accept=\"image/*\"\r\n        class=\"avatar-uploader\"\r\n        :action=\"uploadPath\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n      >\r\n        <img v-if=\"imgUrl\" :src=\"imgUrl\" class=\"avatar\" />\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n      </el-upload>\r\n    </el-form-item> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      //压缩质量\r\n      imgQuality: 0.5,\r\n      imageUrl: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 上传成功\r\n    handleAvatarSuccess(res, file) {\r\n      // 服务器返回结果处理\r\n      console.log(res,file)\r\n    },\r\n    dataURItoBlob(dataURI, type) {\r\n      var binary = atob(dataURI.split(\",\")[1]);\r\n      var array = [];\r\n      for (var i = 0; i < binary.length; i++) {\r\n        array.push(binary.charCodeAt(i));\r\n      }\r\n      return new Blob([new Uint8Array(array)], { type: type });\r\n    },\r\n\r\n    // 上传前\r\n    beforeAvatarUpload(file) {\r\n      const _this = this;\r\n      return new Promise((resolve) => {\r\n        const reader = new FileReader();\r\n        const image = new Image();\r\n        image.onload = (imageEvent) => {\r\n          const canvas = document.createElement(\"canvas\");\r\n          const context = canvas.getContext(\"2d\");\r\n          const width = image.width * _this.imgQuality;\r\n          const height = image.height * _this.imgQuality;\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n          context.clearRect(0, 0, width, height);\r\n          context.drawImage(image, 0, 0, width, height);\r\n          const dataUrl = canvas.toDataURL(file.type);\r\n          const blobData = _this.dataURItoBlob(dataUrl, file.type);\r\n          resolve(blobData);\r\n          console.log(imageEvent)\r\n        };\r\n        reader.onload = (e) => {\r\n          image.src = e.target.result;\r\n        };\r\n        reader.readAsDataURL(file);\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]}]}