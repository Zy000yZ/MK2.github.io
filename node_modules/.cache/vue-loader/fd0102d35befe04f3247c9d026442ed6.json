{"remainingRequest":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\src\\views\\HeritagePraise.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\src\\views\\HeritagePraise.vue","mtime":1639300589216},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1637922542317},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\babel-loader\\lib\\index.js","mtime":1637922545947},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\vue-loader\\lib\\index.js","mtime":1637922546721}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7fSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtYXA6ICIiLA0KICAgICAgZGlzdHJpY3Q6IG51bGwsDQogICAgICBwb2x5Z29uczogW10sDQogICAgICAvLyDlnLDlm77lj5jph48NCg0KICAgICAgZGF0YUxpc3QxOiBbXSwgLy/lnLDlm77mlbDmja4NCiAgICAgIGRhdGFMaXN0MjogW10sIC8v5Zyw5Zu+5pWw5o2uDQogICAgICBkYXRhTGlzdDM6IFtdLCAvL+WcsOWbvuaVsOaNrg0KDQogICAgICBsYXllcjogbnVsbCwgLy/ng63lipvlm77lsYINCiAgICAgIGxpc3Q6IFtdLA0KICAgIH07DQogIH0sDQoNCiAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICAvLyBjb25zb2xlLmxvZygibGlzdCIsIHRoaXMubGlzdCk7DQogICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhTGlzdCk7DQogIH0sDQoNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXRNYXAoKTsgLy/liJ3lp4vljJblnLDlm74NCiAgICB0aGlzLmRyYXdCb3VuZHMoKTsNCiAgICB0aGlzLmRyYXdIb3RNYXAoKTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKFsibGFuZyJdKSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgaW5pdE1hcCgpIHsNCiAgICAgIC8v5Yid5aeL5YyW5Zyw5Zu+DQogICAgICB0aGlzLm1hcCA9IG5ldyBBTWFwLk1hcCgiY29udGFpbmVyIiwgew0KICAgICAgICByZXNpemVFbmFibGU6IHRydWUsDQogICAgICAgIHpvb206IDEwLCAvL+e6p+WIqw0KICAgICAgICB6b29tczogWzYuNSwgMThdLA0KICAgICAgICBjZW50ZXI6IFsxMTUuNDY0NTIzLCAzOC44NzQ0NzZdLCAvL+S4reW/g+eCueWdkOaghw0KICAgICAgICB2aWV3TW9kZTogIjNEIiwgLy/kvb/nlKgzROinhuWbvg0KICAgICAgICBsYW5nOiB0aGlzLmxhbmcsDQogICAgICAgIG1hcFN0eWxlOiAiYW1hcDovL3N0eWxlcy9kYjllZmU2YTE3NDVhYzI0YjcyNjliODYyZjM1OTUzNiIsDQogICAgICAgIGluZm9XaW5kb3c6IG51bGwsDQogICAgICB9KTsNCiAgICB9LA0KDQogICAgLy8g6KOB5Ymq6L6555WMDQogICAgZHJhd0JvdW5kcygpIHsNCiAgICAgIGlmICghdGhpcy5kaXN0cmljdCkgew0KICAgICAgICAvL+WunuS+i+WMlkRpc3RyaWN0U2VhcmNoDQogICAgICAgIHZhciBvcHRzID0gew0KICAgICAgICAgIHN1YmRpc3RyaWN0OiAwLCAvL+iOt+WPlui+ueeVjOS4jemcgOimgei/lOWbnuS4i+e6p+ihjOaUv+WMug0KICAgICAgICAgIGV4dGVuc2lvbnM6ICJhbGwiLCAvL+i/lOWbnuihjOaUv+WMuui+ueeVjOWdkOagh+e7hOetieWFt+S9k+S/oeaBrw0KICAgICAgICAgIGxldmVsOiAicHJvdmluY2UiLCAvL+afpeivouihjOaUv+e6p+WIq+S4uiDluIINCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5kaXN0cmljdCA9IG5ldyBBTWFwLkRpc3RyaWN0U2VhcmNoKG9wdHMpOw0KICAgICAgfQ0KICAgICAgdGhpcy5kaXN0cmljdC5zZXRMZXZlbCgicHJvdmluY2UiKTsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB0aGlzLmRpc3RyaWN0LnNlYXJjaCgi5rKz5YyX55yBIiwgZnVuY3Rpb24gKHN0YXR1cywgcmVzdWx0KSB7DQogICAgICAgIC8vIOays+WMl+ecgei+ueeVjA0KICAgICAgICAvLyB2YXIgYm91bmRzID0gcmVzdWx0LmRpc3RyaWN0TGlzdFswXS5ib3VuZGFyaWVzOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyhzdGF0dXMpOw0KDQogICAgICAgIHZhciBvdXRlciA9IFsNCiAgICAgICAgICBuZXcgQU1hcC5MbmdMYXQoLTM2MCwgOTAsIHRydWUpLA0KICAgICAgICAgIG5ldyBBTWFwLkxuZ0xhdCgtMzYwLCAtOTAsIHRydWUpLA0KICAgICAgICAgIG5ldyBBTWFwLkxuZ0xhdCgzNjAsIC05MCwgdHJ1ZSksDQogICAgICAgICAgbmV3IEFNYXAuTG5nTGF0KDM2MCwgOTAsIHRydWUpLA0KICAgICAgICBdOw0KICAgICAgICB2YXIgaG9sZXMgPSByZXN1bHQuZGlzdHJpY3RMaXN0WzBdLmJvdW5kYXJpZXM7DQoNCiAgICAgICAgdmFyIHBhdGhBcnJheSA9IFtvdXRlcl07DQogICAgICAgIHBhdGhBcnJheS5wdXNoLmFwcGx5KHBhdGhBcnJheSwgaG9sZXMpOw0KICAgICAgICB2YXIgcG9seWdvbiA9IG5ldyBBTWFwLlBvbHlnb24oew0KICAgICAgICAgIHBhdGhMOiBwYXRoQXJyYXksDQogICAgICAgICAgc3Ryb2tlQ29sb3I6ICIjRjlENUE3IiwNCiAgICAgICAgICBzdHJva2VXZWlnaHQ6IDEsDQogICAgICAgICAgZmlsbENvbG9yOiAiI0Y5RDVBNyIsDQogICAgICAgICAgZmlsbE9wYWNpdHk6IDAuMiwNCiAgICAgICAgfSk7DQogICAgICAgIHBvbHlnb24uc2V0UGF0aChwYXRoQXJyYXkpOw0KICAgICAgICBfdGhpcy5tYXAuYWRkKHBvbHlnb24pOw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIC8vIOa4suafk+eDreWKm+Wbvg0KDQogICAgYXN5bmMgZHJhd0hvdE1hcCgpIHsNCiAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICBtZXNzYWdlOiAi5bel5Lia6YGX5Lqn5bu6562R5a+G5bqm54Ot5Yqb5Zu+57uY5Yi25Lit77yM5Yid5qyh5Yqg6L295Y+v6IO955So5pe26L6D6ZW/IiwNCiAgICAgIH0pOw0KDQogICAgICB2YXIgcmVzMSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgNCiAgICAgICAgIi9nZXRIZXJpdGFnZU1haW5EYXRhL2dldEhlcml0YWdlTWFpbkRhdGEiDQogICAgICApOw0KICAgICAgdGhpcy5kYXRhTGlzdDEgPSByZXMxLmRhdGEuZGF0YTsNCg0KICAgICAgdmFyIHJlczIgPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoIi9nZXRIZXJpdGFnZU11c2V1bS9nZXRIZXJpdGFnZU11c2V1bSIpOw0KICAgICAgdGhpcy5kYXRhTGlzdDIgPSByZXMyLmRhdGEuZGF0YTsNCg0KICAgICAgdmFyIHJlczMgPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoDQogICAgICAgICIvZ2V0SGVyaXRhZ2VUb3VyaXNtL2dldEhlcml0YWdlVG91cmlzbSINCiAgICAgICk7DQogICAgICB0aGlzLmRhdGFMaXN0MyA9IHJlczMuZGF0YS5kYXRhOw0KDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YUxpc3QxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHRoaXMubGlzdC5wdXNoKHsNCiAgICAgICAgICBjb29yZGluYXRlOiB0aGlzLmRhdGFMaXN0MVtpXS5jb29yZGluYXRlLA0KICAgICAgICAgIGNvdW50OiBpICsgMSwNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICBmb3IgKGxldCBtID0gMDsgbSA8IHRoaXMuZGF0YUxpc3QyLmxlbmd0aDsgbSsrKSB7DQogICAgICAgIHRoaXMubGlzdC5wdXNoKHsNCiAgICAgICAgICBjb29yZGluYXRlOiB0aGlzLmRhdGFMaXN0MlttXS5jb29yZGluYXRlLA0KICAgICAgICAgIGNvdW50OiBtICsgMSwNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YUxpc3QzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHRoaXMubGlzdC5wdXNoKHsNCiAgICAgICAgICBjb29yZGluYXRlOiB0aGlzLmRhdGFMaXN0M1tpXS5jb29yZGluYXRlLA0KICAgICAgICAgIGNvdW50OiBpICsgMSwNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIHRoaXMubGF5ZXIgPSBuZXcgTG9jYS5IZWF0bWFwTGF5ZXIoew0KICAgICAgICBtYXA6IHRoaXMubWFwLA0KICAgICAgfSk7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOw0KICAgICAgdGhpcy5sYXllci5zZXREYXRhKHRoaXMubGlzdCwgew0KICAgICAgICBsbmdsYXQ6ICJjb29yZGluYXRlIiwNCiAgICAgICAgdmFsdWU6ICJjb3VudCIsDQogICAgICB9KTsNCg0KICAgICAgLy8gIHJhZGl1c+S4uueDreWKm+WNiuW+hO+8jOeUseS6juWIneacn+aVsOaNruacquW9leWFpe+8jOaVheiuvue9rueahOi+g+Wkp++8jOm7mOiupOS4ujE277yM5ZCO57ut5pWw5o2u5YWo6YOo5b2V5YWl5ZCO5YaN6L+b6KGM5L+u5pS544CCDQogICAgICB0aGlzLmxheWVyLnNldE9wdGlvbnMoew0KICAgICAgICBzdHlsZTogew0KICAgICAgICAgIHJhZGl1czogNDAsDQogICAgICAgICAgY29sb3I6IHsNCiAgICAgICAgICAgIDAuNTogIiMyYzdiYjYiLA0KICAgICAgICAgICAgMC42NTogIiNhYmQ5ZTkiLA0KICAgICAgICAgICAgMC43OiAiI2ZmZmZiZiIsDQogICAgICAgICAgICAwLjk6ICIjZmRlNDY4IiwNCiAgICAgICAgICAgIDEuMDogIiNkNzE5MWMiLA0KICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICB9KTsNCg0KICAgICAgdGhpcy5sYXllci5yZW5kZXIoKTsNCg0KICAgICAgLy8gdGhpcy5saXN0ID0gdGhpcy5kYXRhTGlzdC5tYXAoKGVsZSkgPT4gew0KICAgICAgLy8gICBjb25zb2xlLmxvZyhlbGUuaW5kZXgpOw0KICAgICAgLy8gICByZXR1cm4geyBjb29yZGluYXRlOiBlbGUuY29vcmRpbmF0ZSB9Ow0KICAgICAgLy8gfSk7DQoNCiAgICAgIC8vIGNvbnNvbGUubG9nKCJsaXN0IiwgdGhpcy5saXN0KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["HeritagePraise.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"HeritagePraise.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <!-- 遗产报表 -->\r\n  <div class=\"heritage-Hot-Map\">\r\n    <div class=\"heritage-industry\">\r\n      <!-- 地图容器 -->\r\n      <div id=\"container\" class=\"container\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script type=\"text/javascript\" src=\"https://webapi.amap.com/maps?v=1.4.15&key=2eccb47b400c8ab58f2dc596dbfe9d53&plugin=AMap.MouseTool,AMap.DistrictSearch\"></script>\r\n\r\n    <script src=\"https://webapi.amap.com/loca?v=1.3.2&key=2eccb47b400c8ab58f2dc596dbfe9d53\"></script>\r\n    \r\n<script>\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  components: {},\r\n\r\n  data() {\r\n    return {\r\n      map: \"\",\r\n      district: null,\r\n      polygons: [],\r\n      // 地图变量\r\n\r\n      dataList1: [], //地图数据\r\n      dataList2: [], //地图数据\r\n      dataList3: [], //地图数据\r\n\r\n      layer: null, //热力图层\r\n      list: [],\r\n    };\r\n  },\r\n\r\n  async created() {\r\n    // console.log(\"list\", this.list);\r\n    // console.log(this.dataList);\r\n  },\r\n\r\n  mounted() {\r\n    this.initMap(); //初始化地图\r\n    this.drawBounds();\r\n    this.drawHotMap();\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\"lang\"]),\r\n  },\r\n\r\n  methods: {\r\n    initMap() {\r\n      //初始化地图\r\n      this.map = new AMap.Map(\"container\", {\r\n        resizeEnable: true,\r\n        zoom: 10, //级别\r\n        zooms: [6.5, 18],\r\n        center: [115.464523, 38.874476], //中心点坐标\r\n        viewMode: \"3D\", //使用3D视图\r\n        lang: this.lang,\r\n        mapStyle: \"amap://styles/db9efe6a1745ac24b7269b862f359536\",\r\n        infoWindow: null,\r\n      });\r\n    },\r\n\r\n    // 裁剪边界\r\n    drawBounds() {\r\n      if (!this.district) {\r\n        //实例化DistrictSearch\r\n        var opts = {\r\n          subdistrict: 0, //获取边界不需要返回下级行政区\r\n          extensions: \"all\", //返回行政区边界坐标组等具体信息\r\n          level: \"province\", //查询行政级别为 市\r\n        };\r\n        this.district = new AMap.DistrictSearch(opts);\r\n      }\r\n      this.district.setLevel(\"province\");\r\n      var _this = this;\r\n      this.district.search(\"河北省\", function (status, result) {\r\n        // 河北省边界\r\n        // var bounds = result.districtList[0].boundaries;\r\n        // console.log(result);\r\n        // console.log(status);\r\n\r\n        var outer = [\r\n          new AMap.LngLat(-360, 90, true),\r\n          new AMap.LngLat(-360, -90, true),\r\n          new AMap.LngLat(360, -90, true),\r\n          new AMap.LngLat(360, 90, true),\r\n        ];\r\n        var holes = result.districtList[0].boundaries;\r\n\r\n        var pathArray = [outer];\r\n        pathArray.push.apply(pathArray, holes);\r\n        var polygon = new AMap.Polygon({\r\n          pathL: pathArray,\r\n          strokeColor: \"#F9D5A7\",\r\n          strokeWeight: 1,\r\n          fillColor: \"#F9D5A7\",\r\n          fillOpacity: 0.2,\r\n        });\r\n        polygon.setPath(pathArray);\r\n        _this.map.add(polygon);\r\n      });\r\n    },\r\n\r\n    // 渲染热力图\r\n\r\n    async drawHotMap() {\r\n      this.$message({\r\n        message: \"工业遗产建筑密度热力图绘制中，初次加载可能用时较长\",\r\n      });\r\n\r\n      var res1 = await this.$axios.get(\r\n        \"/getHeritageMainData/getHeritageMainData\"\r\n      );\r\n      this.dataList1 = res1.data.data;\r\n\r\n      var res2 = await this.$axios.get(\"/getHeritageMuseum/getHeritageMuseum\");\r\n      this.dataList2 = res2.data.data;\r\n\r\n      var res3 = await this.$axios.get(\r\n        \"/getHeritageTourism/getHeritageTourism\"\r\n      );\r\n      this.dataList3 = res3.data.data;\r\n\r\n      for (let i = 0; i < this.dataList1.length; i++) {\r\n        this.list.push({\r\n          coordinate: this.dataList1[i].coordinate,\r\n          count: i + 1,\r\n        });\r\n      }\r\n      for (let m = 0; m < this.dataList2.length; m++) {\r\n        this.list.push({\r\n          coordinate: this.dataList2[m].coordinate,\r\n          count: m + 1,\r\n        });\r\n      }\r\n      for (let i = 0; i < this.dataList3.length; i++) {\r\n        this.list.push({\r\n          coordinate: this.dataList3[i].coordinate,\r\n          count: i + 1,\r\n        });\r\n      }\r\n\r\n      this.layer = new Loca.HeatmapLayer({\r\n        map: this.map,\r\n      });\r\n      console.log(this.list);\r\n      this.layer.setData(this.list, {\r\n        lnglat: \"coordinate\",\r\n        value: \"count\",\r\n      });\r\n\r\n      //  radius为热力半径，由于初期数据未录入，故设置的较大，默认为16，后续数据全部录入后再进行修改。\r\n      this.layer.setOptions({\r\n        style: {\r\n          radius: 40,\r\n          color: {\r\n            0.5: \"#2c7bb6\",\r\n            0.65: \"#abd9e9\",\r\n            0.7: \"#ffffbf\",\r\n            0.9: \"#fde468\",\r\n            1.0: \"#d7191c\",\r\n          },\r\n        },\r\n      });\r\n\r\n      this.layer.render();\r\n\r\n      // this.list = this.dataList.map((ele) => {\r\n      //   console.log(ele.index);\r\n      //   return { coordinate: ele.coordinate };\r\n      // });\r\n\r\n      // console.log(\"list\", this.list);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}