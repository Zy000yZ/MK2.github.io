{"remainingRequest":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\src\\views\\EditHome.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\src\\views\\EditHome.vue","mtime":1640506284894},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\babel-loader\\lib\\index.js","mtime":1637922545947},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\vue-loader\\lib\\index.js","mtime":1637922546721}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTWFpblRvcCBmcm9tICIuLi9jb21wb25lbnRzL01haW5Ub3AudnVlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIE1haW5Ub3AsDQogIH0sDQoNCiAgd2F0Y2g6IHsNCiAgICBkaWFsb2dGb3JtVmlzaWJsZShuZXdWYWx1ZSkgew0KICAgICAgLy8gY29uc29sZS5sb2cobmV3VmFsdWUpOw0KICAgICAgaWYgKCFuZXdWYWx1ZSkgew0KICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlOw0KICAgICAgICBjb25zb2xlLmxvZygi5Y+W5raI5LqG57yW6L6R6KOF5aGrIik7DQogICAgICAgIHRoaXMucnVsZUZvcm0gPSB7DQogICAgICAgICAgbmFtZTogIiIsDQogICAgICAgICAgcmVnaW9uOiAiIiwgLy/nsbvlnosNCiAgICAgICAgICBkYXRlMTogIiIsIC8v5pe26Ze0DQogICAgICAgICAgLy8gZGF0ZTI6ICIiLA0KICAgICAgICAgIG1haW5UZXh0OiAiIiwNCiAgICAgICAgICBtYWluVGV4dFA6ICIiLA0KICAgICAgICB9Ow0KICAgICAgfQ0KICAgIH0sDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbm90aWNlTGlzdDogW10sDQogICAgICB0YWJsZUxpc3Q6IFtdLA0KICAgICAgbm93VGltZTogIiIsDQogICAgICBkYXRlOiBudWxsLCAvL+aXtumXtOWvueixoQ0KICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLA0KICAgICAgcnVsZUZvcm06IHsNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIHJlZ2lvbjogIiIsIC8v57G75Z6LDQogICAgICAgIGRhdGUxOiAiIiwgLy/ml7bpl7QNCiAgICAgICAgLy8gZGF0ZTI6ICIiLA0KICAgICAgICBtYWluVGV4dDogIiIsDQogICAgICAgIG1haW5UZXh0UDogIiIsDQogICAgICB9LA0KICAgICAgaXNFZGl0OiBmYWxzZSwNCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAiMTIwcHgiLA0KICAgICAgLy8g6KGo5Y2V6aqM6K+B6KeE5YiZDQoNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIG5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl6KaB6Ze75L+h5oGv5ZCN56ewIiwgdHJpZ2dlcjogImNoYW5nZSIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcmVnaW9uOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeimgemXu+S/oeaBr+exu+WeiyIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0sDQogICAgICAgIF0sDQogICAgICAgIG1haW5UZXh0OiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl6KaB6Ze75L+h5oGv6K+m57uG5YaF5a6577yM5rOo5oSP5qC85byP5o6S54mIIiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgICAgLy8gZW5kDQogICAgfTsNCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIC8vIHRoaXMubm93VGltZTsNCiAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZSgpOw0KICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0ZS5nZXRGdWxsWWVhcigpKTsNCiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGUuZ2V0TW9udGgoKSk7DQogICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRlLmdldERhdGUoKSk7DQogICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRlLmdldEhvdXJzKCkpOw0KICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0ZS5nZXRNaW51dGVzKCkpOw0KICAgIHRoaXMubm93VGltZSA9IGAke3RoaXMuZGF0ZS5nZXRGdWxsWWVhcigpfS0kew0KICAgICAgdGhpcy5kYXRlLmdldE1vbnRoKCkgKyAxDQogICAgfS0ke3RoaXMuZGF0ZS5nZXREYXRlKCl9YDsNCiAgICBjb25zb2xlLmxvZyh0aGlzLm5vd1RpbWUpOw0KDQogICAgdGhpcy5nZXROb3RpY2VMaXN0KCk7DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIHN1Ym1pdEZvcm0oKSB7DQogICAgICBpZiAoDQogICAgICAgIHRoaXMucnVsZUZvcm0ubmFtZSA9PT0gIiIgfHwNCiAgICAgICAgdGhpcy5ydWxlRm9ybS5yZWdpb24gPT09ICIiIHx8DQogICAgICAgIHRoaXMucnVsZUZvcm0ubWFpblRleHQgPT09ICIiDQogICAgICApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogIuivt+ajgOafpeWGheWuueaYr+WQpuW3suWFqOmDqOWhq+WGmSIsDQogICAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOagvOW8j+WMluaWh+eroOWGheWuuXN0YXJ0DQogICAgICAgIHZhciByZSA9IC9cbi9nOw0KICAgICAgICB2YXIgb2xkc3RyID0gdGhpcy5ydWxlRm9ybS5tYWluVGV4dDsNCiAgICAgICAgdGhpcy5ydWxlRm9ybS5tYWluVGV4dCA9IHRoaXMucnVsZUZvcm0ubWFpblRleHQucmVwbGFjZShyZSwgIjxicj4iKTsNCg0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJ1bGVGb3JtLm1haW5UZXh0LnNwbGl0KCI8YnI+IikpOw0KICAgICAgICB2YXIgYXJyID0gdGhpcy5ydWxlRm9ybS5tYWluVGV4dC5zcGxpdCgiPGJyPiIpOw0KICAgICAgICB2YXIgbmV3YXJyID0gYXJyLm1hcCgoZWxlKSA9PiAiPHAgY2xhc3M9J3Rlc3QnPiIgKyBlbGUgKyAiPC9wPiIpOw0KICAgICAgICB2YXIgbmV3U3RyID0gbmV3YXJyLmpvaW4oIiIpOw0KICAgICAgICB0aGlzLnJ1bGVGb3JtLm1haW5UZXh0UCA9IG5ld1N0cjsNCiAgICAgICAgdGhpcy5ydWxlRm9ybS5tYWluVGV4dCA9IG9sZHN0cjsNCiAgICAgICAgY29uc29sZS5sb2codGhpcy5ydWxlRm9ybSk7DQogICAgICAgIHRoaXMucnVsZUZvcm0uZGF0ZTEgPSB0aGlzLm5vd1RpbWU7DQoNCiAgICAgICAgaWYgKCF0aGlzLmlzRWRpdCkgew0KICAgICAgICAgIHZhciByZXMgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KA0KICAgICAgICAgICAgIi9wb3N0Tm90aWNlTGlzdC9wb3N0Tm90aWNlTGlzdCIsDQogICAgICAgICAgICB0aGlzLnJ1bGVGb3JtDQogICAgICAgICAgKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICBtZXNzYWdlOiAi6aaW6aG16KaB6Ze75L+h5oGv5re75Yqg5oiQ5YqfIiwNCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLmdldE5vdGljZUxpc3QoKTsNCiAgICAgICAgICAgIHRoaXMucnVsZUZvcm0gPSB7DQogICAgICAgICAgICAgIG5hbWU6ICIiLA0KICAgICAgICAgICAgICByZWdpb246ICIiLCAvL+exu+Weiw0KICAgICAgICAgICAgICBkYXRlMTogIiIsIC8v5pe26Ze0DQogICAgICAgICAgICAgIC8vIGRhdGUyOiAiIiwNCiAgICAgICAgICAgICAgbWFpblRleHQ6ICIiLA0KICAgICAgICAgICAgICBtYWluVGV4dFA6ICIiLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5zmiJbliLfmlrDpobXpnaLph43or5UiLA0KICAgICAgICAgICAgICB0eXBlOiAiZGFuZ2VyIiwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB2YXIgcmVzZWRpdCA9IGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoDQogICAgICAgICAgICAiL2VkaXROb3RpY2VMaXN0L2VkaXROb3RpY2VMaXN0IiwNCiAgICAgICAgICAgIHRoaXMucnVsZUZvcm0NCiAgICAgICAgICApOw0KICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXNlZGl0IiwgcmVzZWRpdCk7DQogICAgICAgICAgaWYgKHJlc2VkaXQuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICBtZXNzYWdlOiAi6aaW6aG16KaB6Ze75L+h5oGv57yW6L6R5oiQ5YqfIiwNCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLmdldE5vdGljZUxpc3QoKTsNCiAgICAgICAgICAgIHRoaXMucnVsZUZvcm0gPSB7DQogICAgICAgICAgICAgIG5hbWU6ICIiLA0KICAgICAgICAgICAgICByZWdpb246ICIiLCAvL+exu+Weiw0KICAgICAgICAgICAgICBkYXRlMTogIiIsIC8v5pe26Ze0DQogICAgICAgICAgICAgIC8vIGRhdGUyOiAiIiwNCiAgICAgICAgICAgICAgbWFpblRleHQ6ICIiLA0KICAgICAgICAgICAgICBtYWluVGV4dFA6ICIiLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIG1lc3NhZ2U6ICLnvJbovpHlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5zmiJbliLfmlrDpobXpnaLph43or5UiLA0KICAgICAgICAgICAgICB0eXBlOiAiZGFuZ2VyIiwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGVuZA0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDojrflj5bliJfooagNCiAgICBhc3luYyBnZXROb3RpY2VMaXN0KCkgew0KICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgiL2dldE5vdGljZUxpc3QvZ2V0Tm90aWNlTGlzdCIpOw0KICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgIHRoaXMubm90aWNlTGlzdCA9IHJlcy5kYXRhLmRhdGE7DQogICAgICB0aGlzLnRhYmxlTGlzdCA9IHJlcy5kYXRhLmRhdGE7DQogICAgfSwNCg0KICAgIGdldE5vdGljZU1haW4ocm93KSB7DQogICAgICBjb25zb2xlLmxvZyhyb3cpOw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOiAiL21haW4vbm90aWNlbWFpbj9faWQ9IiArIHJvdy5yb3cuX2lkLA0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIC8vIOe8lui+keW3peS4mumBl+S6pw0KICAgIGVkaXROb3RpY2VNYWluKHJvdykgew0KICAgICAgY29uc29sZS5sb2cocm93KTsNCiAgICAgIHRoaXMucnVsZUZvcm0gPSByb3cucm93Ow0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmlzRWRpdCA9IHRydWU7DQogICAgfSwNCg0KICAgIC8vIOWIoOmZpOWNleadoQ0KICAgIGFzeW5jIHJlbW92ZU5vdGljZU1haW4ocm93KSB7DQogICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgNCiAgICAgICAgIi9yZW1vdmVPbmVOb3RpY2VMaXN0L3JlbW92ZU9uZU5vdGljZUxpc3QiLA0KICAgICAgICB7DQogICAgICAgICAgX2lkOiByb3cucm93Ll9pZCwNCiAgICAgICAgfQ0KICAgICAgKTsNCg0KICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiAi6aaW6aG16KaB6Ze75L+h5oGv5Yig6Zmk5oiQ5YqfIiwNCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgIH0pOw0KDQogICAgICAgIHRoaXMuZ2V0Tm90aWNlTGlzdCgpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOWksei0pe+8jOivt+ajgOafpee9kee7nOaIluWIt+aWsOmhtemdoumHjeivlSIsDQogICAgICAgICAgdHlwZTogImRhbmdlciIsDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["EditHome.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditHome.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <!-- 主页编辑维护 -->\r\n  <div class=\"my-approve\">\r\n    <div class=\"my-approve-top\">\r\n      <MainTop>数据维护 <span class=\"gang\"> / </span> 遗产主页编辑</MainTop>\r\n    </div>\r\n    <div class=\"my-approve-bottom padding15\">\r\n      <el-button type=\"primary\" size=\"small\" @click=\"dialogFormVisible = true\"\r\n        >添加要闻</el-button\r\n      >\r\n      <br />\r\n      <br />\r\n      <!-- 添加或编辑用表单start -->\r\n      <el-dialog\r\n        title=\"添加 \\ 编辑要闻\"\r\n        :visible.sync=\"dialogFormVisible\"\r\n        width=\"75%\"\r\n      >\r\n        <el-form\r\n          :model=\"ruleForm\"\r\n          :rules=\"rules\"\r\n          ref=\"ruleForm\"\r\n          label-width=\"100px\"\r\n          class=\"demo-ruleForm\"\r\n        >\r\n          <el-form-item label=\"要闻名称\">\r\n            <el-input\r\n              v-model=\"ruleForm.name\"\r\n              placeholder=\"请输入要闻名称\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"要闻类型\">\r\n            <el-select v-model=\"ruleForm.region\" placeholder=\"请选择要闻类型\">\r\n              <el-option label=\"政策\" value=\"政策\"></el-option>\r\n              <el-option label=\"通知\" value=\"通知\"></el-option>\r\n              <el-option label=\"综述\" value=\"综述\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"要闻详情\">\r\n            <el-input\r\n              v-model=\"ruleForm.mainText\"\r\n              type=\"textarea\"\r\n              placeholder=\"请输入要闻详情，注意格式排版\"\r\n              :autosize=\"{ minRows: 10 }\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm()\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <!-- 添加或编辑用表单end -->\r\n      <!-- 数据表格start -->\r\n      <el-table :data=\"tableList\" height=\"600\" border style=\"width: 100%\">\r\n        <el-table-column type=\"index\" label=\"序号\" width=\"100\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"date1\" label=\"日期\" width=\"180\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"name\" label=\"要闻标题\"> </el-table-column>\r\n        <el-table-column prop=\"region\" label=\"类型\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag v-if=\"scope.row.region === '政策'\">政策</el-tag>\r\n            <el-tag v-if=\"scope.row.region === '通知'\" type=\"success\"\r\n              >通知</el-tag\r\n            >\r\n            <el-tag v-if=\"scope.row.region === '综述'\" type=\"info\">综述</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"250\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"getNoticeMain(scope)\"\r\n              >查看</el-button\r\n            >\r\n            <el-button size=\"mini\" type=\"warning\" @click=\"editNoticeMain(scope)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"removeNoticeMain(scope)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- end -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MainTop from \"../components/MainTop.vue\";\r\nexport default {\r\n  components: {\r\n    MainTop,\r\n  },\r\n\r\n  watch: {\r\n    dialogFormVisible(newValue) {\r\n      // console.log(newValue);\r\n      if (!newValue) {\r\n        this.isEdit = false;\r\n        console.log(\"取消了编辑装填\");\r\n        this.ruleForm = {\r\n          name: \"\",\r\n          region: \"\", //类型\r\n          date1: \"\", //时间\r\n          // date2: \"\",\r\n          mainText: \"\",\r\n          mainTextP: \"\",\r\n        };\r\n      }\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      noticeList: [],\r\n      tableList: [],\r\n      nowTime: \"\",\r\n      date: null, //时间对象\r\n      dialogFormVisible: false,\r\n      ruleForm: {\r\n        name: \"\",\r\n        region: \"\", //类型\r\n        date1: \"\", //时间\r\n        // date2: \"\",\r\n        mainText: \"\",\r\n        mainTextP: \"\",\r\n      },\r\n      isEdit: false,\r\n      formLabelWidth: \"120px\",\r\n      // 表单验证规则\r\n\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入要闻信息名称\", trigger: \"change\" },\r\n        ],\r\n        region: [\r\n          { required: true, message: \"请选择要闻信息类型\", trigger: \"change\" },\r\n        ],\r\n        mainText: [\r\n          {\r\n            required: true,\r\n            message: \"请输入要闻信息详细内容，注意格式排版\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n      },\r\n      // end\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // this.nowTime;\r\n    this.date = new Date();\r\n    // console.log(this.date.getFullYear());\r\n    // console.log(this.date.getMonth());\r\n    // console.log(this.date.getDate());\r\n    // console.log(this.date.getHours());\r\n    // console.log(this.date.getMinutes());\r\n    this.nowTime = `${this.date.getFullYear()}-${\r\n      this.date.getMonth() + 1\r\n    }-${this.date.getDate()}`;\r\n    console.log(this.nowTime);\r\n\r\n    this.getNoticeList();\r\n  },\r\n\r\n  methods: {\r\n    async submitForm() {\r\n      if (\r\n        this.ruleForm.name === \"\" ||\r\n        this.ruleForm.region === \"\" ||\r\n        this.ruleForm.mainText === \"\"\r\n      ) {\r\n        this.$message({\r\n          message: \"请检查内容是否已全部填写\",\r\n          type: \"warning\",\r\n        });\r\n      } else {\r\n        // 格式化文章内容start\r\n        var re = /\\n/g;\r\n        var oldstr = this.ruleForm.mainText;\r\n        this.ruleForm.mainText = this.ruleForm.mainText.replace(re, \"<br>\");\r\n\r\n        console.log(this.ruleForm.mainText.split(\"<br>\"));\r\n        var arr = this.ruleForm.mainText.split(\"<br>\");\r\n        var newarr = arr.map((ele) => \"<p class='test'>\" + ele + \"</p>\");\r\n        var newStr = newarr.join(\"\");\r\n        this.ruleForm.mainTextP = newStr;\r\n        this.ruleForm.mainText = oldstr;\r\n        console.log(this.ruleForm);\r\n        this.ruleForm.date1 = this.nowTime;\r\n\r\n        if (!this.isEdit) {\r\n          var res = await this.$axios.post(\r\n            \"/postNoticeList/postNoticeList\",\r\n            this.ruleForm\r\n          );\r\n          console.log(res);\r\n          if (res.status === 200) {\r\n            this.$message({\r\n              message: \"首页要闻信息添加成功\",\r\n              type: \"success\",\r\n            });\r\n            this.dialogFormVisible = false;\r\n            this.getNoticeList();\r\n            this.ruleForm = {\r\n              name: \"\",\r\n              region: \"\", //类型\r\n              date1: \"\", //时间\r\n              // date2: \"\",\r\n              mainText: \"\",\r\n              mainTextP: \"\",\r\n            };\r\n          } else {\r\n            this.$message({\r\n              message: \"添加失败，请检查网络或刷新页面重试\",\r\n              type: \"danger\",\r\n            });\r\n          }\r\n        } else {\r\n          var resedit = await this.$axios.post(\r\n            \"/editNoticeList/editNoticeList\",\r\n            this.ruleForm\r\n          );\r\n          console.log(\"resedit\", resedit);\r\n          if (resedit.status === 200) {\r\n            this.$message({\r\n              message: \"首页要闻信息编辑成功\",\r\n              type: \"success\",\r\n            });\r\n            this.dialogFormVisible = false;\r\n            this.getNoticeList();\r\n            this.ruleForm = {\r\n              name: \"\",\r\n              region: \"\", //类型\r\n              date1: \"\", //时间\r\n              // date2: \"\",\r\n              mainText: \"\",\r\n              mainTextP: \"\",\r\n            };\r\n          } else {\r\n            this.$message({\r\n              message: \"编辑失败，请检查网络或刷新页面重试\",\r\n              type: \"danger\",\r\n            });\r\n          }\r\n        }\r\n\r\n        // end\r\n      }\r\n    },\r\n\r\n    // 获取列表\r\n    async getNoticeList() {\r\n      var res = await this.$axios.get(\"/getNoticeList/getNoticeList\");\r\n      console.log(res);\r\n      this.noticeList = res.data.data;\r\n      this.tableList = res.data.data;\r\n    },\r\n\r\n    getNoticeMain(row) {\r\n      console.log(row);\r\n      this.$router.push({\r\n        path: \"/main/noticemain?_id=\" + row.row._id,\r\n      });\r\n    },\r\n\r\n    // 编辑工业遗产\r\n    editNoticeMain(row) {\r\n      console.log(row);\r\n      this.ruleForm = row.row;\r\n      this.dialogFormVisible = true;\r\n      this.isEdit = true;\r\n    },\r\n\r\n    // 删除单条\r\n    async removeNoticeMain(row) {\r\n      var res = await this.$axios.post(\r\n        \"/removeOneNoticeList/removeOneNoticeList\",\r\n        {\r\n          _id: row.row._id,\r\n        }\r\n      );\r\n\r\n      if (res.status === 200) {\r\n        this.$message({\r\n          message: \"首页要闻信息删除成功\",\r\n          type: \"success\",\r\n        });\r\n\r\n        this.getNoticeList();\r\n      } else {\r\n        this.$message({\r\n          message: \"删除失败，请检查网络或刷新页面重试\",\r\n          type: \"danger\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}