{"remainingRequest":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.0（竖）\\webgis-mobil\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.0（竖）\\webgis-mobil\\src\\views\\Heritage\\getCoordinate.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.0（竖）\\webgis-mobil\\src\\views\\Heritage\\getCoordinate.vue","mtime":1654669557487},{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.0（竖）\\webgis-mobil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.0（竖）\\webgis-mobil\\node_modules\\babel-loader\\lib\\index.js","mtime":1637922545947},{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.0（竖）\\webgis-mobil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.0（竖）\\webgis-mobil\\node_modules\\vue-loader\\lib\\index.js","mtime":1637922546721}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJIZXJpdGFnZUluZHVzdHJ5IiwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtYXA6ICIiLA0KICAgICAgZGlzdHJpY3Q6IG51bGwsDQogICAgICBwb2x5Z29uczogW10sDQogICAgICB6b29tOiAxMCwNCiAgICAgIG1hcmtlcjogbnVsbCwgLy/lt6XkuJrpgZfkuqfngrnkvY0NCg0KICAgICAgLy8g5Yeg5L2V5p+l6K+iDQogICAgICBnZW9tZXRyeVNlYXJjaFR5cGU6ICJtYXJrZXIiLCAvL+Wni+e7iOS4uueCuQ0KICAgICAgZ2VvbWV0cnlCb3g6IGZhbHNlLCAvL+WHoOS9leafpeivoumdouadv+makOiXj+Wxleekug0KICAgICAgbW91c2VUb29sOiBudWxsLA0KICAgICAgb3ZlcmxheXM6IFtdLCAvL+e7mOWItuWlveeahOimhueblueJqQ0KICAgICAgZ2VvbWV0cnlTZWFyY2hSZXM6IFtdLCAvL+WHoOS9leafpeivoue7k+aenA0KICAgICAgaXNzZWFyY2hSZXM6IHRydWUsIC8v5p+l6K+i57uT5p6c5Zu+5qCH5pi+56S66ZqQ6JePDQoNCiAgICAgIC8vIOexu+Wei+afpeivog0KICAgICAgb3B0aW9uczogWw0KICAgICAgICB7DQogICAgICAgICAgdHlwZTogIuWFqOmDqOexu+WeiyIsDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgdHlwZVNlbGVjdDogIuWFqOmDqOexu+WeiyIsDQogICAgfTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKFsibGFuZyIsICJuZXdDb29yZGluYXRlIiwgIkNvb3JkaW5hdGVUeXBlIiwgImFwcGx5Q29vcmRpbmF0ZSJdKSwNCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIGNvbnNvbGUubG9nKHRoaXMuQ29vcmRpbmF0ZVR5cGUpOw0KICB9LA0KDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0TWFwKCk7IC8v5Yid5aeL5YyW5Zyw5Zu+DQoNCiAgICAvLyB0aGlzLmRpc1NlYXJjaCgpOw0KICAgIHRoaXMuZHJhd0JvdW5kcygpOw0KICAgIHRoaXMubW91c2VUb29sID0gbmV3IEFNYXAuTW91c2VUb29sKHRoaXMubWFwKTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwTXV0YXRpb25zKFsiZ2V0Q29vcmRpbmF0ZSIsICJnZXRhcHBseUNvb3JkaW5hdGUiXSksDQoNCiAgICBpbml0TWFwKCkgew0KICAgICAgLy/liJ3lp4vljJblnLDlm74NCiAgICAgIHRoaXMubWFwID0gbmV3IEFNYXAuTWFwKCJjb250YWluZXIiLCB7DQogICAgICAgIHJlc2l6ZUVuYWJsZTogdHJ1ZSwNCiAgICAgICAgem9vbTogMTUsIC8v57qn5YirDQogICAgICAgIHpvb21zOiBbNi41LCAxOF0sDQogICAgICAgIGNlbnRlcjogWzEyMC4zMzc4MjQsIDM2LjA2MzQ3N10sIC8v5Lit5b+D54K55Z2Q5qCHDQogICAgICAgIHZpZXdNb2RlOiAiM0QiLCAvL+S9v+eUqDNE6KeG5Zu+DQogICAgICAgIGxhbmc6IHRoaXMubGFuZywNCiAgICAgICAgbWFwU3R5bGU6ICJhbWFwOi8vc3R5bGVzL2ZyZXNoIiwNCiAgICAgICAgaW5mb1dpbmRvdzogbnVsbCwNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvLyDoo4HliarovrnnlYwNCiAgICBkcmF3Qm91bmRzKCkgew0KICAgICAgaWYgKCF0aGlzLmRpc3RyaWN0KSB7DQogICAgICAgIC8v5a6e5L6L5YyWRGlzdHJpY3RTZWFyY2gNCiAgICAgICAgdmFyIG9wdHMgPSB7DQogICAgICAgICAgc3ViZGlzdHJpY3Q6IDAsIC8v6I635Y+W6L6555WM5LiN6ZyA6KaB6L+U5Zue5LiL57qn6KGM5pS/5Yy6DQogICAgICAgICAgZXh0ZW5zaW9uczogImFsbCIsIC8v6L+U5Zue6KGM5pS/5Yy66L6555WM5Z2Q5qCH57uE562J5YW35L2T5L+h5oGvDQogICAgICAgICAgbGV2ZWw6ICJwcm92aW5jZSIsIC8v5p+l6K+i6KGM5pS/57qn5Yir5Li6IOW4gg0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLmRpc3RyaWN0ID0gbmV3IEFNYXAuRGlzdHJpY3RTZWFyY2gob3B0cyk7DQogICAgICB9DQogICAgICB0aGlzLmRpc3RyaWN0LnNldExldmVsKCJwcm92aW5jZSIpOw0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIHRoaXMuZGlzdHJpY3Quc2VhcmNoKCLmsrPljJfnnIEiLCBmdW5jdGlvbiAoc3RhdHVzLCByZXN1bHQpIHsNCiAgICAgICAgLy8g5rKz5YyX55yB6L6555WMDQogICAgICAgIC8vIHZhciBib3VuZHMgPSByZXN1bHQuZGlzdHJpY3RMaXN0WzBdLmJvdW5kYXJpZXM7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXR1cyk7DQoNCiAgICAgICAgdmFyIG91dGVyID0gWw0KICAgICAgICAgIG5ldyBBTWFwLkxuZ0xhdCgtMzYwLCA5MCwgdHJ1ZSksDQogICAgICAgICAgbmV3IEFNYXAuTG5nTGF0KC0zNjAsIC05MCwgdHJ1ZSksDQogICAgICAgICAgbmV3IEFNYXAuTG5nTGF0KDM2MCwgLTkwLCB0cnVlKSwNCiAgICAgICAgICBuZXcgQU1hcC5MbmdMYXQoMzYwLCA5MCwgdHJ1ZSksDQogICAgICAgIF07DQogICAgICAgIHZhciBob2xlcyA9IHJlc3VsdC5kaXN0cmljdExpc3RbMF0uYm91bmRhcmllczsNCg0KICAgICAgICB2YXIgcGF0aEFycmF5ID0gW291dGVyXTsNCiAgICAgICAgcGF0aEFycmF5LnB1c2guYXBwbHkocGF0aEFycmF5LCBob2xlcyk7DQogICAgICAgIHZhciBwb2x5Z29uID0gbmV3IEFNYXAuUG9seWdvbih7DQogICAgICAgICAgcGF0aEw6IHBhdGhBcnJheSwNCiAgICAgICAgICBzdHJva2VDb2xvcjogIiNGOUQ1QTciLA0KICAgICAgICAgIHN0cm9rZVdlaWdodDogMSwNCiAgICAgICAgICBmaWxsQ29sb3I6ICIjRjlENUE3IiwNCiAgICAgICAgICBmaWxsT3BhY2l0eTogMC4yLA0KICAgICAgICB9KTsNCiAgICAgICAgcG9seWdvbi5zZXRQYXRoKHBhdGhBcnJheSk7DQogICAgICAgIF90aGlzLm1hcC5hZGQocG9seWdvbik7DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgLy8g5Yeg5L2V5p+l6K+i5Ye95pWw57O75YiXc3RhcnQNCiAgICBvcGVuZ2VvbWV0cnlCb3goKSB7DQogICAgICB0aGlzLmdlb21ldHJ5Qm94ID0gIXRoaXMuZ2VvbWV0cnlCb3g7DQogICAgfSwNCiAgICBjbG9zZWdlb21ldHJ5Qm94KCkgew0KICAgICAgdGhpcy5nZW9tZXRyeUJveCA9ICF0aGlzLmdlb21ldHJ5Qm94Ow0KICAgIH0sDQogICAgLy8g6ZuG5ZCI5p+l6K+i5Ye95pWw57O75YiXc3RhcnQNCg0KICAgIGRyYXdHZW9tZXRyeSgpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ2VvbWV0cnlTZWFyY2hUeXBlKTsNCiAgICAgIHN3aXRjaCAodGhpcy5nZW9tZXRyeVNlYXJjaFR5cGUpIHsNCiAgICAgICAgY2FzZSAibWFya2VyIjogew0KICAgICAgICAgIHRoaXMubW91c2VUb29sLm1hcmtlcih7DQogICAgICAgICAgICAvL+WQjE1hcmtlcueahE9wdGlvbuiuvue9rg0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyB0aGlzLm1vdXNlVG9vbC5jbG9zZSgpOyAvL+WFs+mXre+8jOW5tua4hemZpOimhueblueJqQ0KICAgICAgdGhpcy5tb3VzZVRvb2wub24oImRyYXciLCAoZSkgPT4gew0KICAgICAgICB0aGlzLm92ZXJsYXlzLnB1c2goZS5vYmopOw0KICAgICAgICBjb25zb2xlLmxvZygiZS5vYmotLS0tLS0tLS0iLCBlLm9iai5nZXRQb3NpdGlvbigpKTsgLy/ojrflj5bngrnmoIforrDnmoTkvY3nva4NCg0KICAgICAgICB2YXIgemIgPSBlLm9iai5nZXRQb3NpdGlvbigpOw0KICAgICAgICBpZiAodGhpcy5Db29yZGluYXRlVHlwZSA9PT0gImFkZCIpIHsNCiAgICAgICAgICB0aGlzLmdldENvb3JkaW5hdGUoW3piLmxuZywgemIubGF0XSk7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5Db29yZGluYXRlVHlwZSA9PT0gImFwcGx5Iikgew0KICAgICAgICAgIHRoaXMuZ2V0YXBwbHlDb29yZGluYXRlKFt6Yi5sbmcsIHpiLmxhdF0pOw0KICAgICAgICB9DQoNCiAgICAgICAgY29uc29sZS5sb2codGhpcy5uZXdDb29yZGluYXRlKTsNCg0KICAgICAgICB0aGlzLm1vdXNlVG9vbC5jbG9zZSgpOyAvL+WFs+mXrQ0KICAgICAgfSk7IC8v6Kej6Zmk57uR5a6a77yMDQogICAgfSwNCg0KICAgIGdldEFnaW4oKSB7DQogICAgICB0aGlzLm1vdXNlVG9vbC5jbG9zZSh0cnVlKTsNCiAgICAgIHRoaXMuZ2V0Q29vcmRpbmF0ZShbXSk7DQogICAgICB0aGlzLmdldGFwcGx5Q29vcmRpbmF0ZShbXSk7DQogICAgfSwNCg0KICAgIHN1YigpIHsNCiAgICAgIGlmICh0aGlzLkNvb3JkaW5hdGVUeXBlID09PSAiYWRkIikgew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2hlcml0YWdlL2FkZC9hZGQiKTsNCiAgICAgIH0gZWxzZSBpZiAodGhpcy5Db29yZGluYXRlVHlwZSA9PT0gImFwcGx5Iikgew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2hlcml0YWdlL2FwcGx5Iik7DQogICAgICB9DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["getCoordinate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"getCoordinate.vue","sourceRoot":"src/views/Heritage","sourcesContent":["<template>\r\n  <!-- 工业遗产 -->\r\n  <div class=\"getCoordinate\">\r\n    <div class=\"heritage-industry\">\r\n      <!-- 地图容器 -->\r\n      <div id=\"container\" class=\"container\">\r\n        <div class=\"map-buttons\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"drawGeometry\"\r\n            class=\"map-btn map-element\"\r\n            >{{ lang === \"zh_cn\" ? \"拾取坐标\" : \"Pick coordinates\" }}</el-button\r\n          >\r\n\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"getAgin\"\r\n            class=\"map-btn map-element\"\r\n            >{{ lang === \"zh_cn\" ? \"清空\" : \"Clear\" }}</el-button\r\n          >\r\n\r\n          <el-button\r\n            v-show=\"\r\n              this.newCoordinate.length !== 0 ||\r\n              this.applyCoordinate.length !== 0\r\n            \"\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"sub\"\r\n            class=\"map-btn map-element\"\r\n            >{{ lang === \"zh_cn\" ? \"确定\" : \"OK\" }}</el-button\r\n          >\r\n        </div>\r\n\r\n        <!-- 几何查询弹框 -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/javascript\" src=\"https://webapi.amap.com/maps?v=1.4.15&key=2eccb47b400c8ab58f2dc596dbfe9d53&plugin=AMap.MouseTool,AMap.DistrictSearch\"></script>\r\n<script>\r\nimport { mapState, mapMutations } from \"vuex\";\r\nexport default {\r\n  name: \"HeritageIndustry\",\r\n\r\n  data() {\r\n    return {\r\n      map: \"\",\r\n      district: null,\r\n      polygons: [],\r\n      zoom: 10,\r\n      marker: null, //工业遗产点位\r\n\r\n      // 几何查询\r\n      geometrySearchType: \"marker\", //始终为点\r\n      geometryBox: false, //几何查询面板隐藏展示\r\n      mouseTool: null,\r\n      overlays: [], //绘制好的覆盖物\r\n      geometrySearchRes: [], //几何查询结果\r\n      issearchRes: true, //查询结果图标显示隐藏\r\n\r\n      // 类型查询\r\n      options: [\r\n        {\r\n          type: \"全部类型\",\r\n        },\r\n      ],\r\n      typeSelect: \"全部类型\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\"lang\", \"newCoordinate\", \"CoordinateType\", \"applyCoordinate\"]),\r\n  },\r\n\r\n  created() {\r\n    console.log(this.CoordinateType);\r\n  },\r\n\r\n  mounted() {\r\n    this.initMap(); //初始化地图\r\n\r\n    // this.disSearch();\r\n    this.drawBounds();\r\n    this.mouseTool = new AMap.MouseTool(this.map);\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"getCoordinate\", \"getapplyCoordinate\"]),\r\n\r\n    initMap() {\r\n      //初始化地图\r\n      this.map = new AMap.Map(\"container\", {\r\n        resizeEnable: true,\r\n        zoom: 15, //级别\r\n        zooms: [6.5, 18],\r\n        center: [120.337824, 36.063477], //中心点坐标\r\n        viewMode: \"3D\", //使用3D视图\r\n        lang: this.lang,\r\n        mapStyle: \"amap://styles/fresh\",\r\n        infoWindow: null,\r\n      });\r\n    },\r\n\r\n    // 裁剪边界\r\n    drawBounds() {\r\n      if (!this.district) {\r\n        //实例化DistrictSearch\r\n        var opts = {\r\n          subdistrict: 0, //获取边界不需要返回下级行政区\r\n          extensions: \"all\", //返回行政区边界坐标组等具体信息\r\n          level: \"province\", //查询行政级别为 市\r\n        };\r\n        this.district = new AMap.DistrictSearch(opts);\r\n      }\r\n      this.district.setLevel(\"province\");\r\n      var _this = this;\r\n      this.district.search(\"河北省\", function (status, result) {\r\n        // 河北省边界\r\n        // var bounds = result.districtList[0].boundaries;\r\n        // console.log(result);\r\n        // console.log(status);\r\n\r\n        var outer = [\r\n          new AMap.LngLat(-360, 90, true),\r\n          new AMap.LngLat(-360, -90, true),\r\n          new AMap.LngLat(360, -90, true),\r\n          new AMap.LngLat(360, 90, true),\r\n        ];\r\n        var holes = result.districtList[0].boundaries;\r\n\r\n        var pathArray = [outer];\r\n        pathArray.push.apply(pathArray, holes);\r\n        var polygon = new AMap.Polygon({\r\n          pathL: pathArray,\r\n          strokeColor: \"#F9D5A7\",\r\n          strokeWeight: 1,\r\n          fillColor: \"#F9D5A7\",\r\n          fillOpacity: 0.2,\r\n        });\r\n        polygon.setPath(pathArray);\r\n        _this.map.add(polygon);\r\n      });\r\n    },\r\n\r\n    // 几何查询函数系列start\r\n    opengeometryBox() {\r\n      this.geometryBox = !this.geometryBox;\r\n    },\r\n    closegeometryBox() {\r\n      this.geometryBox = !this.geometryBox;\r\n    },\r\n    // 集合查询函数系列start\r\n\r\n    drawGeometry() {\r\n      // console.log(this.geometrySearchType);\r\n      switch (this.geometrySearchType) {\r\n        case \"marker\": {\r\n          this.mouseTool.marker({\r\n            //同Marker的Option设置\r\n          });\r\n          break;\r\n        }\r\n      }\r\n      // this.mouseTool.close(); //关闭，并清除覆盖物\r\n      this.mouseTool.on(\"draw\", (e) => {\r\n        this.overlays.push(e.obj);\r\n        console.log(\"e.obj---------\", e.obj.getPosition()); //获取点标记的位置\r\n\r\n        var zb = e.obj.getPosition();\r\n        if (this.CoordinateType === \"add\") {\r\n          this.getCoordinate([zb.lng, zb.lat]);\r\n        } else if (this.CoordinateType === \"apply\") {\r\n          this.getapplyCoordinate([zb.lng, zb.lat]);\r\n        }\r\n\r\n        console.log(this.newCoordinate);\r\n\r\n        this.mouseTool.close(); //关闭\r\n      }); //解除绑定，\r\n    },\r\n\r\n    getAgin() {\r\n      this.mouseTool.close(true);\r\n      this.getCoordinate([]);\r\n      this.getapplyCoordinate([]);\r\n    },\r\n\r\n    sub() {\r\n      if (this.CoordinateType === \"add\") {\r\n        this.$router.push(\"/heritage/add/add\");\r\n      } else if (this.CoordinateType === \"apply\") {\r\n        this.$router.push(\"/heritage/apply\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.heritage-industry #container {\r\n  border-bottom: 1px solid #f9d5a7;\r\n}\r\n</style>"]}]}