{"remainingRequest":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.1（竖）\\webgis-mobil\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.1（竖）\\webgis-mobil\\src\\views\\DataManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.1（竖）\\webgis-mobil\\src\\views\\DataManage.vue","mtime":1671540982193},{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.1（竖）\\webgis-mobil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.1（竖）\\webgis-mobil\\node_modules\\babel-loader\\lib\\index.js","mtime":1637922545947},{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.1（竖）\\webgis-mobil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-work-fish\\项目初始化模板\\项目初始化模板2.1（竖）\\webgis-mobil\\node_modules\\vue-loader\\lib\\index.js","mtime":1637922546721}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgTWFpblRvcCBmcm9tICIuLi9jb21wb25lbnRzL01haW5Ub3AudnVlIjsNCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgLy8gTWFpblRvcCwNCiAgfSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhY3RpdmVOYW1lOiAiZmlyc3QiLA0KDQogICAgICB0YWJsZURhdGE6IFtdLA0KDQogICAgICBzZWFyY2hTdHI6ICIiLA0KDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGRpYWxvZ0RhdGE6IHsNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIGJyaWVmOiAiIiwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIC8vIOWIneWni+WMluaVsOaNrg0KICAgIC8vIHZhciByZXMgPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoIi9nZXRIZXJpdGFnZU1haW5EYXRhL2dldEhlcml0YWdlTWFpbkRhdGEiKTsNCiAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMuYWxsR29uZ0ppYW87DQogICAgdGhpcy5jaGFuZ2VpbnN0cnlUeXBlKCJvbmUiKTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKFsiaW5zdHJ5VHlwZSIsICJhbGxHb25nSmlhbyJdKSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwTXV0YXRpb25zKFsiY2hhbmdlaW5zdHJ5VHlwZSIsICJnZXRDb29yZGluYXRlIl0pLA0KICAgIGFkZEhlcml0YWdlKCkgew0KICAgICAgdGhpcy5nZXRDb29yZGluYXRlKFtdKTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvaGVyaXRhZ2UvYWRkL2FkZCIpOw0KICAgIH0sDQoNCiAgICBoYW5kbGVDbG9zZShkb25lKSB7DQogICAgICB0aGlzLiRjb25maXJtKCLnoa7orqTlhbPpl63vvJ8iKQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgZG9uZSgpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4ge30pOw0KICAgIH0sDQoNCiAgICBhc3luYyBjaGFuZ2VEYXRhVHlwZSgpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHRhYiwgZXZlbnQpOw0KICAgICAgaWYgKHRoaXMuYWN0aXZlTmFtZSA9PT0gImZpcnN0Iikgew0KICAgICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kYXhpb3MuZ2V0KA0KICAgICAgICAgICIvZ2V0SGVyaXRhZ2VNYWluRGF0YS9nZXRIZXJpdGFnZU1haW5EYXRhIg0KICAgICAgICApOw0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgIHRoaXMuY2hhbmdlaW5zdHJ5VHlwZSgib25lIik7DQogICAgICB9DQogICAgfSwNCg0KICAgIC8vIOihqOagvHN0YXJ0DQogICAgLy8g5p+l55yL6K+m5oOFDQogICAgZ2V0TWFpbihyb3cpIHsNCiAgICAgIGNvbnNvbGUubG9nKHJvdyk7DQogICAgICB0aGlzLmRpYWxvZ0RhdGEgPSByb3c7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOw0KICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goIi9oZXJpdGFnZS9pbmR1c3RyeS9tYWluLyIgKyByb3cuX2lkKTsNCiAgICB9LA0KDQogICAgLy8g57yW6L6R5oyJ6ZKuDQogICAgZWRpdE1haW4ocm93KSB7DQogICAgICBjb25zb2xlLmxvZyhyb3cpOw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9oZXJpdGFnZS9hZGQvIiArIHJvdy5faWQpOw0KICAgIH0sDQoNCiAgICAvLyDmqKHns4rmn6Xor6LmjInpkq4NCiAgICBhc3luYyBzZWFyY2hDbGljaygpIHsNCiAgICAgIGlmICh0aGlzLnNlYXJjaFN0cikgew0KICAgICAgICAvLyB0aGlzLmNoYW5nZURhdGFUeXBlKCk7DQoNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSB0aGlzLmFsbEdvbmdKaWFvOw0KDQogICAgICAgIHZhciBuZXd0YWJsZURhdGEgPSB0aGlzLnRhYmxlRGF0YS5maWx0ZXIoKGVsZSkgPT4NCiAgICAgICAgICBlbGUubmFtZS5pbmNsdWRlcyh0aGlzLnNlYXJjaFN0cikNCiAgICAgICAgKTsNCg0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IG5ld3RhYmxlRGF0YTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gdGhpcy5hbGxHb25nSmlhbzsNCiAgICAgIH0NCg0KICAgICAgLy8gY29uc29sZS5sb2cobmV3dGFibGVEYXRhKTsNCiAgICB9LA0KDQogICAgYXN5bmMgZGVsTWFpbihyb3cpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHJvdywgdGhpcy5pbnN0cnlUeXBlKTsNCiAgICAgIHZhciByZXMgPSAiIjsNCiAgICAgIGlmICh0aGlzLmluc3RyeVR5cGUgPT09ICJvbmUiKSB7DQogICAgICAgIHJlcyA9IGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoDQogICAgICAgICAgIi9yZW1vdmVPbmVIZXJpdGFnZU1haW5EYXRhL3JlbW92ZU9uZUhlcml0YWdlTWFpbkRhdGEiLA0KICAgICAgICAgIHJvdw0KICAgICAgICApOw0KICAgICAgfQ0KDQogICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIG1lc3NhZ2U6ICLkv6Hmga/liKDpmaTmiJDlip8iLA0KICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIC8vIOmHjeaWsOiOt+WPluaVsOaNrg0KICAgICAgdmFyIHJlczEgPSAiIjsNCiAgICAgIGlmICh0aGlzLmluc3RyeVR5cGUgPT09ICJvbmUiKSB7DQogICAgICAgIHJlczEgPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoDQogICAgICAgICAgIi9nZXRIZXJpdGFnZU1haW5EYXRhL2dldEhlcml0YWdlTWFpbkRhdGEiDQogICAgICAgICk7DQogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5zdHJ5VHlwZSA9PT0gInR3byIpIHsNCiAgICAgICAgcmVzMSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgiL2dldEhlcml0YWdlTXVzZXVtL2dldEhlcml0YWdlTXVzZXVtIik7DQogICAgICB9IGVsc2UgaWYgKHRoaXMuaW5zdHJ5VHlwZSA9PT0gInRocmVlIikgew0KICAgICAgICByZXMxID0gYXdhaXQgdGhpcy4kYXhpb3MuZ2V0KCIvZ2V0SGVyaXRhZ2VUb3VyaXNtL2dldEhlcml0YWdlVG91cmlzbSIpOw0KICAgICAgfQ0KDQogICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlczEuZGF0YS5kYXRhOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["DataManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"DataManage.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <!-- 数据管理 -->\r\n  <div class=\"data-manage\">\r\n    <!-- <div class=\"data-manage-top\">\r\n      <MainTop\r\n        >查询系统 <span class=\"gang\"> / </span> 数据管理</MainTop\r\n      >\r\n    </div> -->\r\n    <div class=\"data-manage-bottom padding15\">\r\n      <div class=\"data-manage-buttons\">\r\n        <!-- 按钮组 -->\r\n        <!-- <el-tag>总数:{{ 1 }}</el-tag> -->\r\n        <span style=\"margin-right: 15px\">\r\n          路线总数:{{ allGongJiao.length }}\r\n        </span>\r\n\r\n        <el-input\r\n          style=\"width: 300px; margin-left: 15px\"\r\n          placeholder=\"请输入关键词\"\r\n          v-model=\"searchStr\"\r\n          size=\"small\"\r\n          class=\"input-with-select\"\r\n        >\r\n          <el-button\r\n            slot=\"append\"\r\n            icon=\"el-icon-search\"\r\n            @click=\"searchClick\"\r\n          ></el-button>\r\n        </el-input>\r\n        <br />\r\n        <br />\r\n\r\n        <!-- 详情及表格 -->\r\n        <el-tabs\r\n          v-model=\"activeName\"\r\n          type=\"border-card\"\r\n          @tab-click=\"changeDataType\"\r\n        >\r\n          <el-tab-pane label=\"南京市公交线路一览\" name=\"first\">\r\n            <el-table\r\n              border\r\n              stripe\r\n              :data=\"tableData\"\r\n              style=\"width: 100%\"\r\n              height=\"480\"\r\n            >\r\n              <el-table-column type=\"expand\" style=\"padding: 0, 10px\">\r\n                <template slot-scope=\"props\">\r\n                  <el-form\r\n                    label-position=\"left\"\r\n                    inline\r\n                    class=\"demo-table-expand\"\r\n                  >\r\n                    <!-- <span>{{ .name }}</span> -->\r\n                    <el-steps align-center>\r\n                      <div v-for=\"(ele, index) in props.row.road\" :key=\"index\">\r\n                        <el-step :title=\"ele\"></el-step>\r\n                      </div>\r\n                    </el-steps>\r\n                  </el-form>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                type=\"index\"\r\n                label=\"序号\"\r\n                width=\"60\"\r\n                align=\"center\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column prop=\"name\" label=\"线路名称\" width=\"180\">\r\n              </el-table-column>\r\n              <!-- <el-table-column prop=\"company\" label=\"门票价格\" width=\"180\">\r\n              </el-table-column> -->\r\n\r\n              <!-- <el-table-column\r\n                prop=\"start\"\r\n                width=\"200\"\r\n                align=\"center\"\r\n                label=\"shifa\"\r\n              >\r\n              </el-table-column> -->\r\n              <el-table-column width=\"200\" align=\"center\" label=\"首车发车时间\">\r\n                05:30\r\n              </el-table-column>\r\n              <el-table-column\r\n                width=\"200\"\r\n                align=\"center\"\r\n                label=\"末班车发车时间\"\r\n              >\r\n                22:30\r\n              </el-table-column>\r\n              <el-table-column label=\"承运公司\"\r\n                >南京江南公交客运有限公司\r\n              </el-table-column>\r\n\r\n              <!-- <el-table-column label=\"操作\" align=\"center\" width=\"150\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    @click=\"getMain(scope.row)\"\r\n                    type=\"text\"\r\n                    size=\"small\"\r\n                    >查看</el-button\r\n                  >\r\n                  <el-button\r\n                    type=\"text\"\r\n                    @click=\"editMain(scope.row)\"\r\n                    size=\"small\"\r\n                    >编辑</el-button\r\n                  >\r\n                  <el-button\r\n                    type=\"text\"\r\n                    size=\"small\"\r\n                    @click=\"delMain(scope.row)\"\r\n                    >删除</el-button\r\n                  >\r\n                </template>\r\n              </el-table-column> -->\r\n            </el-table>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n\r\n        <el-dialog\r\n          :title=\"dialogData.name\"\r\n          :visible.sync=\"dialogVisible\"\r\n          width=\"30%\"\r\n          :before-close=\"handleClose\"\r\n        >\r\n          <span>故居简介：</span>\r\n          <span>{{ dialogData.brief }}</span>\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"dialogVisible = false\"\r\n              >确 定</el-button\r\n            >\r\n          </span>\r\n        </el-dialog>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import MainTop from \"../components/MainTop.vue\";\r\nimport { mapState, mapMutations } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    // MainTop,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      activeName: \"first\",\r\n\r\n      tableData: [],\r\n\r\n      searchStr: \"\",\r\n\r\n      dialogVisible: false,\r\n      dialogData: {\r\n        name: \"\",\r\n        brief: \"\",\r\n      },\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // 初始化数据\r\n    // var res = await this.$axios.get(\"/getHeritageMainData/getHeritageMainData\");\r\n    this.tableData = this.allGongJiao;\r\n    this.changeinstryType(\"one\");\r\n  },\r\n\r\n  computed: {\r\n    ...mapState([\"instryType\", \"allGongJiao\"]),\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"changeinstryType\", \"getCoordinate\"]),\r\n    addHeritage() {\r\n      this.getCoordinate([]);\r\n      this.$router.push(\"/heritage/add/add\");\r\n    },\r\n\r\n    handleClose(done) {\r\n      this.$confirm(\"确认关闭？\")\r\n        .then(() => {\r\n          done();\r\n        })\r\n        .catch(() => {});\r\n    },\r\n\r\n    async changeDataType() {\r\n      // console.log(tab, event);\r\n      if (this.activeName === \"first\") {\r\n        var res = await this.$axios.get(\r\n          \"/getHeritageMainData/getHeritageMainData\"\r\n        );\r\n        this.tableData = res.data.data;\r\n        this.changeinstryType(\"one\");\r\n      }\r\n    },\r\n\r\n    // 表格start\r\n    // 查看详情\r\n    getMain(row) {\r\n      console.log(row);\r\n      this.dialogData = row;\r\n      this.dialogVisible = true;\r\n      // this.$router.push(\"/heritage/industry/main/\" + row._id);\r\n    },\r\n\r\n    // 编辑按钮\r\n    editMain(row) {\r\n      console.log(row);\r\n      this.$router.push(\"/heritage/add/\" + row._id);\r\n    },\r\n\r\n    // 模糊查询按钮\r\n    async searchClick() {\r\n      if (this.searchStr) {\r\n        // this.changeDataType();\r\n\r\n        this.tableData = this.allGongJiao;\r\n\r\n        var newtableData = this.tableData.filter((ele) =>\r\n          ele.name.includes(this.searchStr)\r\n        );\r\n\r\n        this.tableData = newtableData;\r\n      } else {\r\n        this.tableData = this.allGongJiao;\r\n      }\r\n\r\n      // console.log(newtableData);\r\n    },\r\n\r\n    async delMain(row) {\r\n      // console.log(row, this.instryType);\r\n      var res = \"\";\r\n      if (this.instryType === \"one\") {\r\n        res = await this.$axios.post(\r\n          \"/removeOneHeritageMainData/removeOneHeritageMainData\",\r\n          row\r\n        );\r\n      }\r\n\r\n      if (res.status === 200) {\r\n        this.$message({\r\n          message: \"信息删除成功\",\r\n          type: \"success\",\r\n        });\r\n      }\r\n\r\n      // 重新获取数据\r\n      var res1 = \"\";\r\n      if (this.instryType === \"one\") {\r\n        res1 = await this.$axios.get(\r\n          \"/getHeritageMainData/getHeritageMainData\"\r\n        );\r\n      } else if (this.instryType === \"two\") {\r\n        res1 = await this.$axios.get(\"/getHeritageMuseum/getHeritageMuseum\");\r\n      } else if (this.instryType === \"three\") {\r\n        res1 = await this.$axios.get(\"/getHeritageTourism/getHeritageTourism\");\r\n      }\r\n\r\n      this.tableData = res1.data.data;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}