{"remainingRequest":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\src\\views\\MoneyPlan.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\src\\views\\MoneyPlan.vue","mtime":1640086114598},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\css-loader\\dist\\cjs.js","mtime":1637922544066},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1637922548447},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\postcss-loader\\src\\index.js","mtime":1637922545893},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637922542348},{"path":"D:\\a-my-html\\html-GIS\\git-develop\\vue-industry-gis\\node_modules\\vue-loader\\lib\\index.js","mtime":1637922546721}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5tb25leS1wbGFuIC5saW5lIHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0K"},{"version":3,"sources":["MoneyPlan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6UA;AACA;AACA","file":"MoneyPlan.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <!-- 预算评估 -->\r\n  <div class=\"money-plan\">\r\n    <div class=\"money-plan-top\">\r\n      <MainTop>我要旅行 <span class=\"gang\"> / </span> 预算评估</MainTop>\r\n    </div>\r\n    <div class=\"money-plan-bottom padding15\">\r\n      <el-alert\r\n        title=\"由于实际出行的诸多不可控因素，评估结果与实际花销或有较大出入，评估结果仅供参考\"\r\n        type=\"info\"\r\n      >\r\n      </el-alert>\r\n      <br />\r\n      <div class=\"form-morey-plan\">\r\n        <el-form\r\n          :model=\"ruleForm\"\r\n          :rules=\"rules\"\r\n          ref=\"ruleForm\"\r\n          label-width=\"100px\"\r\n          class=\"demo-ruleForm\"\r\n        >\r\n          <el-form-item label=\"遗产名称\" prop=\"mainType\">\r\n            <el-cascader\r\n              class=\"maincascader\"\r\n              size=\"mini\"\r\n              v-model=\"ruleForm.mainType\"\r\n              :options=\"selOptions\"\r\n              placeholder=\"请选择出行目的地\"\r\n            ></el-cascader>\r\n          </el-form-item>\r\n          <div v-if=\"ruleForm.mainType\">\r\n            <el-form-item label=\"遗产地址\">\r\n              <span>{{ ruleForm.mainType[1].address }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"遗产类型\">\r\n              <span>{{ ruleForm.mainType[1].addType }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"所属公司\">\r\n              <span>{{ ruleForm.mainType[1].company }}</span>\r\n            </el-form-item>\r\n          </div>\r\n\r\n          <el-form-item label=\"距离(公里)\" prop=\"distance\">\r\n            <el-input-number\r\n              v-model=\"ruleForm.distance\"\r\n              :min=\"1\"\r\n              label=\"描述文字\"\r\n            ></el-input-number>\r\n          </el-form-item>\r\n          <el-form-item label=\"出行周期\" required>\r\n            <el-col :span=\"11\">\r\n              <el-form-item prop=\"date1\">\r\n                <el-date-picker\r\n                  type=\"date\"\r\n                  placeholder=\"选择时间\"\r\n                  v-model=\"ruleForm.date1\"\r\n                  style=\"width: 100%\"\r\n                  value-format=\"yyyyMMdd\"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col class=\"line\" :span=\"2\">至</el-col>\r\n            <el-col :span=\"11\">\r\n              <el-form-item prop=\"date2\">\r\n                <el-date-picker\r\n                  type=\"date\"\r\n                  placeholder=\"选择时间\"\r\n                  v-model=\"ruleForm.date2\"\r\n                  style=\"width: 100%\"\r\n                  value-format=\"yyyyMMdd\"\r\n                ></el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"游玩偏好\" prop=\"playType\">\r\n            <el-radio-group v-model=\"ruleForm.playType\">\r\n              <el-radio label=\"四处逛逛\"></el-radio>\r\n              <el-radio label=\"简单逛逛\"></el-radio>\r\n              <el-radio label=\"看看就走\"></el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"出行方式\" prop=\"gotype\">\r\n            <el-radio-group v-model=\"ruleForm.gotype\">\r\n              <el-radio label=\"跟团\"></el-radio>\r\n              <el-radio label=\"自驾游\"></el-radio>\r\n              <el-radio label=\"火车\"></el-radio>\r\n              <el-radio label=\"飞机\"></el-radio>\r\n              <el-radio label=\"大巴\"></el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"住宿(元)\" prop=\"hotel\">\r\n            <el-radio-group v-model=\"ruleForm.hotel\">\r\n              <el-radio label=\"100~300\"></el-radio>\r\n              <el-radio label=\"300~500\"></el-radio>\r\n              <el-radio label=\"500以上\"></el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <div>\r\n            <el-form-item label=\"预计花销\">\r\n              <el-tag>{{\r\n                allMoney === \"\" ? \"暂无数据\" : allMoney + \"元\"\r\n              }}</el-tag>\r\n            </el-form-item>\r\n          </div>\r\n\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\r\n              >立即评估</el-button\r\n            >\r\n            <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport MainTop from \"../components/MainTop.vue\";\r\nexport default {\r\n  components: {\r\n    MainTop,\r\n  },\r\n  created() {\r\n    // console.log(this.$route);\r\n    this.getOptions();\r\n    // var res = await this.$axios.get(\r\n    //   \"https://restapi.amap.com/v3/ip?key=f9ad07883aba0cb89e8e2ea081f0a355\"\r\n    // );\r\n    // console.log(res);\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      // 表单内容start\r\n      ruleForm: {\r\n        mainType: \"\", //级联选择器选择结果\r\n        distance: 1, //出行距离\r\n        date1: \"\", //出发时间\r\n        date2: \"\", //结束时间\r\n        playType: \"\",\r\n        gotype: \"\",\r\n        hotel: \"\", //宾馆价位\r\n      },\r\n      selOptions: [\r\n        {\r\n          value: \"工业遗产\",\r\n          label: \"工业遗产\",\r\n          children: [],\r\n        },\r\n        {\r\n          value: \"工业博物馆\",\r\n          label: \"工业博物馆\",\r\n          children: [],\r\n        },\r\n        {\r\n          value: \"工业旅游区\",\r\n          label: \"工业旅游区\",\r\n          children: [],\r\n        },\r\n      ], //级联选择器数据\r\n      rules: {\r\n        mainType: [\r\n          { required: true, message: \"请选择出行目的地\", trigger: \"change\" },\r\n        ],\r\n        distance: [\r\n          { required: true, message: \"请输入出行距离\", trigger: \"change\" },\r\n        ],\r\n        date1: [\r\n          {\r\n            required: true,\r\n            message: \"请选择出发时间\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        date2: [\r\n          {\r\n            required: true,\r\n            message: \"请选择返回时间\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        playType: [\r\n          {\r\n            required: true,\r\n            message: \"请选择一个游玩偏好\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        gotype: [\r\n          { required: true, message: \"请选择出行方式\", trigger: \"change\" },\r\n        ],\r\n        hotel: [\r\n          { required: true, message: \"请选择住宿条件价位\", trigger: \"change\" },\r\n        ],\r\n      },\r\n      allMoney: \"\", //所有出行花销\r\n      // 表单内容end\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    submitForm(formName) {\r\n      console.log(this.ruleForm);\r\n\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (this.ruleForm.date2 > this.ruleForm.date1) {\r\n            console.log(this.ruleForm);\r\n            if (this.ruleForm.distance < 40) {\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"您的出行距离较小，请注意检查是否正确\",\r\n              });\r\n            }\r\n\r\n            // 计算日期差\r\n            var year1 = parseFloat(this.ruleForm.date1.slice(0, 4));\r\n            var year2 = parseFloat(this.ruleForm.date2.slice(0, 4));\r\n            var mon1 = parseFloat(this.ruleForm.date1.slice(4, 6));\r\n            var mon2 = parseFloat(this.ruleForm.date2.slice(4, 6));\r\n            var day1 = parseFloat(this.ruleForm.date1.slice(6));\r\n            var day2 = parseFloat(this.ruleForm.date2.slice(6));\r\n            // console.log(year1, mon1, day1);\r\n            // console.log(\"day1,day2\", day1, day2);\r\n            if (year2 - year1 > 0) {\r\n              mon2 = mon2 + 12 * (year2 - year1);\r\n              // console.log(1);\r\n            }\r\n            if (mon2 - mon1 > 0) {\r\n              day2 = day2 + 30 * (mon2 - mon1);\r\n              console.log(\"mon2 - mon1\", mon2 - mon1);\r\n              // console.log(day2);\r\n            }\r\n\r\n            var days = day2 - day1;\r\n            // console.log(\"日期差\", days);\r\n            var shuijishu = Math.floor(Math.random() * (100 - 1) + 1);\r\n            var allMoney = shuijishu + 100;\r\n            if (\r\n              this.ruleForm.gotype === \"跟团\" ||\r\n              this.ruleForm.gotype === \"火车\"\r\n            ) {\r\n              allMoney = allMoney + this.ruleForm.distance;\r\n            } else if (\r\n              this.ruleForm.gotype === \"大巴\" ||\r\n              this.ruleForm.gotype === \"飞机\"\r\n            ) {\r\n              allMoney = allMoney + this.ruleForm.distance * 2;\r\n            } else if (this.ruleForm.gotype === \"火车\") {\r\n              allMoney = allMoney + this.ruleForm.distance * 3;\r\n            }\r\n\r\n            if (this.ruleForm.playType === \"四处逛逛\") {\r\n              allMoney = allMoney + 1000;\r\n            } else if (this.ruleForm.playType === \"简单逛逛\") {\r\n              allMoney = allMoney + 500;\r\n            } else if (this.ruleForm.playType === \"看看就走\") {\r\n              allMoney = allMoney + 300;\r\n            }\r\n\r\n            if (this.ruleForm.hotel === \"100~300\") {\r\n              allMoney = allMoney + 200 * days;\r\n            } else if (this.ruleForm.hotel === \"300~500\") {\r\n              allMoney = allMoney + 400 * days;\r\n            } else if (this.ruleForm.hotel === \"500以上\") {\r\n              allMoney = allMoney + 700 * days;\r\n            }\r\n\r\n            console.log(\"所有花销\", allMoney);\r\n            this.allMoney = allMoney;\r\n            this.$notify({\r\n              title: \"成功\",\r\n              message: \"预算评估成功\",\r\n              type: \"success\",\r\n            });\r\n          } else {\r\n            this.$message({\r\n              showClose: true,\r\n              message: \"结束时间请晚于开始时间\",\r\n              type: \"warning\",\r\n            });\r\n          }\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n\r\n    // 初始化级联选择器数据\r\n    async getOptions() {\r\n      var res1 = await this.$axios.get(\r\n        \"/getHeritageMainData/getHeritageMainData\"\r\n      );\r\n      // console.log(\"工业遗产\", res1);\r\n      this.selOptions[0].children = res1.data.data.map((ele) => {\r\n        return {\r\n          value: ele,\r\n          label: ele.name,\r\n        };\r\n      });\r\n\r\n      var res2 = await this.$axios.get(\"/getHeritageMuseum/getHeritageMuseum\");\r\n      // console.log(\"工业bwguan\", res2);\r\n\r\n      this.selOptions[1].children = res2.data.data.map((ele) => {\r\n        return {\r\n          value: ele,\r\n          label: ele.name,\r\n        };\r\n      });\r\n\r\n      var res3 = await this.$axios.get(\r\n        \"/getHeritageTourism/getHeritageTourism\"\r\n      );\r\n\r\n      this.selOptions[2].children = res3.data.data.map((ele) => {\r\n        return {\r\n          value: ele,\r\n          label: ele.name,\r\n        };\r\n      });\r\n      // console.log(\"all\", this.selOptions);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.money-plan .line {\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}